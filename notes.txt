2014-05-05

cmake works, linking fails:

Linking CXX executable ElmerSolver
libelmersolver.so: undefined reference to `mpi_allreduce_'
libelmersolver.so: undefined reference to `pdsaupd_'
libelmersolver.so: undefined reference to `mpi_buffer_detach_'
libelmersolver.so: undefined reference to `mpi_recv_'
libelmersolver.so: undefined reference to `mpi_comm_size_'
libelmersolver.so: undefined reference to `mpi_buffer_attach_'
libelmersolver.so: undefined reference to `mpi_send_'
libelmersolver.so: undefined reference to `pdseupd_'
libelmersolver.so: undefined reference to `mpi_barrier_'
libelmersolver.so: undefined reference to `mpi_init_'
libelmersolver.so: undefined reference to `mpi_waitany_'
libelmersolver.so: undefined reference to `pznaupd_'
libelmersolver.so: undefined reference to `mpi_bsend_'
libelmersolver.so: undefined reference to `mpi_comm_free_'
libelmersolver.so: undefined reference to `pzneupd_'
libelmersolver.so: undefined reference to `pdneupd_'
libelmersolver.so: undefined reference to `mpi_finalize_'
libelmersolver.so: undefined reference to `mpi_waitall_'
libelmersolver.so: undefined reference to `mpi_comm_rank_'
libelmersolver.so: undefined reference to `mpi_comm_group_'
libelmersolver.so: undefined reference to `mpi_irecv_'
libelmersolver.so: undefined reference to `mpi_group_incl_'
libelmersolver.so: undefined reference to `pdnaupd_'
libelmersolver.so: undefined reference to `addrfunc_'
libelmersolver.so: undefined reference to `mpi_comm_create_'
collect2: error: ld returned 1 exit status
make[2]: *** [fem/src/ElmerSolver] Error 1
make[1]: *** [fem/src/CMakeFiles/ElmerSolver.dir/all] Error 2

2014-05-06

* Requires cmake 2.8.9 for CMAKE_POSITION_INDEPENDENT_CODE
* fixed undefined symbol "addrfunc_" issue by adding #ifndef USE_ISO_C_BINDINGS \n INTEGER(KIND=Addrint) :: AddrFunc \n #endif

2014-05-08

* cpack wants to package the tests in build dirs
  => solution install them in Release build to different place or
  don't install at all
* mpi libraries are linked with -rpath
* installs arpack, parpack, umfpack etc.. which should be dependencies
  => TODO?: make optionally installable alongside with elmer?
* matc, binio, huti, fhuti, libelmersolver lack version numbers
* what is the name of the packet?

2014-05-12

* mpi wrappers are ok so long as e.g. CC=mpicc as env-variable
  before running cmake
